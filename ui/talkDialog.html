<!--
Copyright (c) 2025 Bastian Kleinschmidt
Licensed under the GNU Affero General Public License v3.0.
See LICENSE.txt for details.
-->
<!doctype html>
<meta charset="utf-8">
<title data-i18n="talk_dialog_title">Nextcloud Talk</title>
<link rel="stylesheet" href="tbTheme.css">
<style>
:root{
  --brand-blue:var(--tb-accent);
  --header-height:48px;
  --dialog-accent:var(--tb-accent);
  --dialog-surface:var(--tb-bg);
  --dialog-outline:var(--tb-border);
  --dialog-outline-strong:var(--tb-border-strong);
  --dialog-text:var(--tb-text);
  --dialog-gap:10px;
  --dialog-pad-left:22px;
  --dialog-pad-right:22px;
  --control-height:32px;
  --control-radius:var(--tb-control-radius);
  --control-padding-x:12px;
  --control-action-width:132px;
  --content-max:520px;
  --dialog-shadow:var(--tb-shadow);
}
html,
body{
  height:100%;
}
body{
  margin:0;
  padding:0;
  font:message-box;
  background:var(--tb-bg);
  color:var(--tb-text);
  min-height:0;
  box-sizing:border-box;
  display:flex;
  justify-content:center;
  align-items:flex-start;
}
input,
button,
select,
textarea{
  font:inherit;
}
@keyframes dialogEnter{
  from{opacity:0; transform:translateY(12px);}
  to{opacity:1; transform:translateY(0);}
}
.hidden{
  display:none !important;
}
[hidden]{
  display:none !important;
}
.dialog{
  width:100%;
  max-width:520px;
  margin:0 auto;
  background:var(--tb-bg);
  border-radius:var(--tb-radius);
  border:1px solid var(--tb-border);
  box-shadow:none;
  display:flex;
  flex-direction:column;
  overflow:hidden;
  box-sizing:border-box;
  height:100%;
  max-height:100%;
  min-height:0;
  animation:dialogEnter .35s ease-out;
}
.dialog-hero{
  background:var(--brand-blue);
  padding:0;
  text-align:center;
  height:var(--header-height);
  overflow:hidden;
  display:flex;
  align-items:center;
  justify-content:center;
  align-items:flex-start;
}
.dialog-hero img{
  width:auto; height:100%; max-width:328px; display:block; object-fit:contain;
  margin:0 auto;
}

.dialog-content{
  padding:var(--dialog-gap) var(--dialog-pad-right) var(--dialog-gap) var(--dialog-pad-left);
  display:flex;
  flex-direction:column;
  gap:var(--dialog-gap);
  background:var(--tb-bg);
  max-width:var(--content-max);
  width:100%;
  margin:0 auto;
  flex:1;
  min-height:0;
  overflow:auto;
  box-sizing:border-box;
}
.section{
  border:1px solid var(--tb-border);
  border-radius:var(--tb-radius);
  padding:12px 14px;
  background:var(--tb-surface);
  box-shadow:none;
}
.section.delegate-section{
  flex:0 0 auto;
}
.section label{
  display:block;
  font-weight:600;
  margin-bottom:6px;
}
.section input[type="text"]{
  width:100%;
  height:var(--control-height);
  padding:0 var(--control-padding-x);
  border:1px solid var(--tb-border-strong);
  border-radius:var(--control-radius);
  background:var(--tb-surface);
  box-sizing:border-box;
  transition:border-color .15s ease, box-shadow .15s ease, background .15s ease;
}
.section input[type="text"]:focus{
  border-color:var(--dialog-accent);
  background:var(--tb-surface);
  outline:none;
  box-shadow:0 0 0 3px rgba(0,130,201,0.15);
}
.section input[type="text"]::placeholder{
  color:var(--tb-muted);
}
.section input[type="text"]:disabled{
  background:var(--tb-surface-2);
  color:var(--tb-muted);
}
.delegate-field{
  display:flex;
  flex-direction:column;
  gap:var(--dialog-gap);
  position:relative;
}
.delegate-input-wrap{
  position:relative;
}
.delegate-input-row{
  display:flex;
  gap:10px;
  align-items:stretch;
}
.delegate-input-row input{
  flex:1;
  min-width:0;
}
.delegate-input-row button{
  height:var(--control-height);
  padding:0 14px;
  width:var(--control-action-width);
  flex:0 0 var(--control-action-width);
  box-sizing:border-box;
  white-space:nowrap;
  border-radius:var(--control-radius);
  border:1px solid var(--tb-border);
  background:var(--tb-surface);
  color:var(--dialog-text);
  cursor:pointer;
  transition:border-color .15s ease,color .15s ease;
}
.delegate-input-row button:hover{
  border-color:var(--dialog-accent);
  color:var(--dialog-accent);
}
.delegate-status{
  font-size:12px;
  color:var(--tb-muted);
}
.delegate-status:empty{
  display:none;
}
.delegate-selected{
  display:flex;
  align-items:center;
  gap:10px;
  border-radius:10px;
  padding:8px 10px;
  background:var(--tb-surface-2);
  border:1px solid var(--tb-border);
}
.delegate-avatar{
  width:32px;
  height:32px;
  border-radius:50%;
  background:var(--tb-surface);
  border:1px solid var(--tb-border);
  display:flex;
  align-items:center;
  justify-content:center;
  align-items:flex-start;
  overflow:hidden;
  flex:0 0 32px;
  position:relative;
  font-weight:600;
  color:var(--tb-text);
}
.delegate-avatar img{
  width:100%;
  height:100%;
  object-fit:cover;
  display:none;
}
.delegate-avatar span{
  font-size:12px;
}
.delegate-selected-text{
  display:flex;
  flex-direction:column;
  gap:1px;
  min-width:0;
}
.delegate-selected-title{
  font-size:9px;
  text-transform:uppercase;
  letter-spacing:0.08em;
  color:var(--tb-muted);
}
.delegate-selected-name{
  font-size:13px;
  font-weight:600;
  color:var(--tb-text);
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}
.delegate-selected-meta{
  font-size:11px;
  color:var(--tb-muted);
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}
.delegate-hint{
  font-size:11px;
  color:var(--tb-muted);
  margin-top:0;
}
.delegate-dropdown{
  position:absolute;
  left:0;
  right:0;
  bottom:100%;
  margin-bottom:4px;
  background:var(--tb-surface);
  border:1px solid var(--tb-border);
  border-radius:10px;
  box-shadow:var(--tb-shadow);
  max-height:50vh;
  overflow-y:auto;
  display:none;
  z-index:1000;
}
.delegate-dropdown .row{
  display:flex;
  gap:10px;
  align-items:center;
  padding:9px 12px;
  cursor:pointer;
  border-bottom:1px solid var(--tb-border);
}
.delegate-dropdown .row:last-child{
  border-bottom:none;
}
.delegate-dropdown .row:hover,
.delegate-dropdown .row.active{
  background:var(--tb-surface-2);
}
.delegate-dropdown .row-avatar{
  width:32px;
  height:32px;
  border-radius:50%;
  background:var(--tb-surface);
  border:1px solid var(--tb-border);
  display:flex;
  align-items:center;
  justify-content:center;
  align-items:flex-start;
  overflow:hidden;
  flex:0 0 32px;
  font-weight:600;
  color:var(--tb-text);
}
.delegate-dropdown .row-avatar img{
  width:100%;
  height:100%;
  object-fit:cover;
  display:none;
}
.delegate-dropdown .row-text{
  display:flex;
  flex-direction:column;
  gap:1px;
  min-width:0;
}
.delegate-dropdown .row-text .primary{
  font-size:13px;
  font-weight:600;
  color:var(--tb-text);
  word-break:break-word;
}
.delegate-dropdown .row-text .secondary{
  font-size:12px;
  color:var(--tb-muted);
  word-break:break-word;
}
.password-row{
  display:flex;
  gap:10px;
  align-items:stretch;
}
.password-row input{
  flex:1;
  min-width:0;
}
.password-row button{
  height:var(--control-height);
  padding:0 14px;
  width:var(--control-action-width);
  flex:0 0 var(--control-action-width);
  box-sizing:border-box;
  white-space:nowrap;
  border-radius:var(--control-radius);
  border:1px solid var(--tb-border);
  background:var(--tb-surface);
  color:var(--dialog-text);
  cursor:pointer;
  transition:border-color .15s ease,color .15s ease,background .15s ease;
}
.password-row button:hover{
  border-color:var(--dialog-accent);
  color:var(--dialog-accent);
  background:var(--tb-surface-2);
}
.checkbox-row{
  display:flex;
  gap:8px;
  align-items:center;
  margin:4px 0;
}
.option-tooltip-wrap{
  position:relative;
}
.option-tooltip{
  position:absolute;
  left:0;
  top:100%;
  margin-top:6px;
  border:1px solid var(--tb-border);
  border-radius:10px;
  padding:10px 12px;
  background:var(--tb-bg);
  box-shadow:var(--tb-shadow);
  max-width:min(480px,calc(100vw - 48px));
  display:none;
  z-index:1100;
}
.option-tooltip-wrap:hover .option-tooltip,
.option-tooltip-wrap:focus-within .option-tooltip{
  display:block;
}
.option-tooltip-title{
  font-weight:800;
  font-size:12px;
  margin:0 0 6px 0;
}
.option-tooltip-list{
  margin:0;
  padding-left:18px;
}
.option-tooltip-list li{
  margin:0 0 4px 0;
  font-size:12px;
  color:var(--tb-text);
}
.option-tooltip-list li:last-child{
  margin-bottom:0;
}
.section-heading{
  font-weight:600;
  margin-bottom:6px;
}
.roomtype-picker{
  position:relative;
  width:100%;
}
.roomtype-button{
  width:100%;
  height:var(--control-height);
  padding:0 var(--control-padding-x);
  border:1px solid var(--tb-border-strong);
  border-radius:var(--control-radius);
  background:var(--tb-surface);
  color:var(--tb-text);
  box-sizing:border-box;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  cursor:pointer;
  transition:border-color .15s ease, box-shadow .15s ease, background .15s ease;
}
.roomtype-button:hover{
  border-color:var(--dialog-accent);
}
.roomtype-button:focus{
  border-color:var(--dialog-accent);
  background:var(--tb-surface);
  outline:none;
  box-shadow:0 0 0 3px rgba(0,130,201,0.15);
}
.roomtype-button-label{
  font-weight:600;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}
.roomtype-button-arrow{
  color:var(--tb-muted);
  flex:0 0 auto;
}
.roomtype-dropdown{
  position:absolute;
  top:100%;
  left:0;
  right:0;
  margin-top:4px;
  background:var(--tb-surface);
  border:1px solid var(--tb-border);
  border-radius:10px;
  box-shadow:var(--tb-shadow);
  overflow:hidden;
  z-index:1000;
}
.roomtype-option{
  width:100%;
  text-align:left;
  border:0;
  background:transparent;
  padding:10px 12px;
  cursor:pointer;
  display:flex;
  flex-direction:column;
  gap:8px;
}
.roomtype-option:hover,
.roomtype-option:focus{
  background:var(--tb-surface-2);
  outline:none;
}
.roomtype-option-main{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
.roomtype-option-label{
  font-weight:600;
  color:var(--tb-text);
}
.roomtype-option-check{
  visibility:hidden;
  color:var(--dialog-accent);
  font-weight:800;
}
.roomtype-option[data-selected="true"] .roomtype-option-check{
  visibility:visible;
}
.roomtype-tooltip{
  display:none;
  border:1px solid var(--tb-border);
  border-radius:10px;
  padding:10px 12px;
  background:var(--tb-bg);
  box-shadow:var(--tb-shadow);
}
.roomtype-option:hover .roomtype-tooltip,
.roomtype-option:focus .roomtype-tooltip{
  display:block;
}
.roomtype-tooltip-title{
  font-weight:800;
  font-size:12px;
  margin:0 0 6px 0;
}
.roomtype-tooltip-list{
  margin:0;
  padding-left:18px;
}
.roomtype-tooltip-list li{
  margin:0 0 4px 0;
  font-size:12px;
  color:var(--tb-text);
}
.roomtype-tooltip-list li:last-child{
  margin-bottom:0;
}
.checkbox-row input[type="checkbox"]{
  accent-color:var(--dialog-accent);
}
.footer{
  border-top:1px solid var(--tb-border);
  padding:var(--dialog-gap) var(--dialog-pad-right) var(--dialog-gap) var(--dialog-pad-left);
  display:flex;
  justify-content:flex-end;
  gap:12px;
  background:var(--tb-bg);
  box-sizing:border-box;
}
.footer button{
  padding:8px 18px;
  border-radius:6px;
  border:1px solid var(--tb-border);
  background:var(--tb-surface);
  cursor:pointer;
}
.footer button.primary{
  background:var(--brand-blue);
  color:#fff;
  border-color:var(--brand-blue);
}
.message{
  min-height:0;
  font-size:13px;
  color:#b00020;
  margin-bottom:-4px;
}
.message:empty{
  display:none;
}
.delegate-modal-overlay{
  position:fixed;
  inset:0;
  background:rgba(8,20,48,0.45);
  display:flex;
  align-items:center;
  justify-content:center;
  align-items:flex-start;
  z-index:999;
}
.delegate-modal{
  width:min(420px,calc(100% - 32px));
  background:var(--tb-surface);
  border-radius:var(--tb-radius);
  border:1px solid var(--tb-border);
  box-shadow:var(--tb-shadow);
  padding:22px 26px 20px;
  display:flex;
  flex-direction:column;
  gap:16px;
}
.delegate-modal-title{
  font-size:16px;
  font-weight:600;
  color:var(--tb-text);
}
.delegate-modal-text{
  font-size:13px;
  color:var(--tb-text);
  line-height:1.45;
}
.delegate-modal-actions{
  display:flex;
  justify-content:flex-end;
  gap:10px;
}
.delegate-modal-actions button{
  padding:8px 20px;
  border-radius:8px;
  border:1px solid var(--tb-border);
  background:var(--tb-surface-2);
  color:var(--tb-text);
  cursor:pointer;
  transition:background .15s ease,border-color .15s ease,color .15s ease;
}
.delegate-modal-actions button.primary{
  border-color:var(--brand-blue);
  background:var(--brand-blue);
  color:#fff;
}
.delegate-modal-actions button.secondary{
  background:var(--tb-surface);
}
.delegate-modal-actions button:focus{
  outline:none;
  box-shadow:0 0 0 3px rgba(0,130,201,0.35);
}
.delegate-modal-overlay[data-variant="error"] .delegate-modal-title{
  color:#b00020;
}
.delegate-modal-overlay[data-variant="success"] .delegate-modal-title{
  color:#0c7c3f;
}
</style>
<body>
  <div class="dialog">
    <div class="dialog-hero">
      <img src="assets/header-solid-blue-328x96.png" alt="NC Connector">
    </div>
    <div class="dialog-content">
<div class="message" id="messageBar"></div>
      <div class="section">
        <label for="titleInput" data-i18n="ui_create_title_label">Titel</label>
        <input id="titleInput" type="text">
      </div>
      <div class="section roomtype-section">
        <label for="roomTypeButton" data-i18n="ui_create_roomtype_label">Raumtyp</label>
        <div class="roomtype-picker" id="roomTypePicker">
          <button type="button" class="roomtype-button" id="roomTypeButton" aria-haspopup="listbox" aria-expanded="false">
            <span class="roomtype-button-label" id="roomTypeButtonLabel" data-i18n="ui_create_mode_event">Event-Unterhaltung</span>
            <span class="roomtype-button-arrow" aria-hidden="true">‚ñæ</span>
          </button>
          <div class="roomtype-dropdown" id="roomTypeDropdown" role="listbox" hidden>
            <button type="button" class="roomtype-option" data-value="event" data-selected="true" role="option">
              <div class="roomtype-option-main">
                <span class="roomtype-option-label" data-i18n="ui_create_mode_event">Event-Unterhaltung</span>
                <span class="roomtype-option-check" aria-hidden="true">‚úì</span>
              </div>
              <div class="roomtype-tooltip" role="tooltip">
                <div class="roomtype-tooltip-title" data-i18n="talk_roomtype_event_title">üìÖ Event-Unterhaltung</div>
                <ul class="roomtype-tooltip-list">
                  <li data-i18n="talk_roomtype_event_line1">Zeitlich begrenzt: f√ºr einen konkreten Termin oder Anlass</li>
                  <li data-i18n="talk_roomtype_event_line2">Spontan & leichtgewichtig: geeignet f√ºr Meetings, Schulungen oder Webinare</li>
                  <li data-i18n="talk_roomtype_event_line3">Selbstaufr√§umend: wird nach einiger Zeit automatisch entfernt</li>
                </ul>
              </div>
            </button>
            <button type="button" class="roomtype-option" data-value="normal" data-selected="false" role="option">
              <div class="roomtype-option-main">
                <span class="roomtype-option-label" data-i18n="ui_create_mode_standard">Gruppenunterhaltung</span>
                <span class="roomtype-option-check" aria-hidden="true">‚úì</span>
              </div>
              <div class="roomtype-tooltip" role="tooltip">
                <div class="roomtype-tooltip-title" data-i18n="talk_roomtype_group_title">üó®Ô∏è Gruppenunterhaltung</div>
                <ul class="roomtype-tooltip-list">
                  <li data-i18n="talk_roomtype_group_line1">Dauerhaft: bleibt bestehen, bis sie aktiv gel√∂scht wird</li>
                  <li data-i18n="talk_roomtype_group_line2">F√ºr den Alltag gemacht: ideal f√ºr Teams, Abteilungen, laufende Projekte und wiederkehrende Termine</li>
                  <li data-i18n="talk_roomtype_group_line3">Mit Verlauf: der gesamte Chat ist jederzeit nachvollziehbar</li>
                </ul>
              </div>
            </button>
          </div>
          <input type="hidden" id="roomTypeValue" value="event">
        </div>
      </div>
      <div class="section password-section">
        <label class="checkbox-row">
          <input type="checkbox" id="passwordToggle">
          <span data-i18n="talk_password_toggle_label">Passwort setzen</span>
        </label>
        <div class="password-row" id="passwordFields">
          <input id="passwordInput" type="text" autocomplete="new-password">
          <button type="button" id="passwordGenerateBtn" data-i18n="ui_password_generate_label">Generieren</button>
        </div>
      </div>
      <div class="section section-options">
        <div class="section-heading" data-i18n="talk_section_settings">Optionen</div>
        <label class="checkbox-row option-tooltip-wrap">
          <input type="checkbox" id="addUsersToggle">
          <span data-i18n="ui_create_add_users_label">Benutzer hinzuf√ºgen</span>
          <div class="option-tooltip" role="tooltip">
            <div class="option-tooltip-title" data-i18n="talk_option_add_users_title">üë§ Benutzer hinzuf√ºgen</div>
            <ul class="option-tooltip-list">
              <li data-i18n="talk_option_add_users_line1">Interne Nextcloud-Benutzer werden direkt dem Raum hinzugef√ºgt</li>
              <li data-i18n="talk_option_add_users_line2">Der Raum ist sofort in Nextcloud Talk sichtbar</li>
            </ul>
          </div>
        </label>
        <label class="checkbox-row option-tooltip-wrap">
          <input type="checkbox" id="addGuestsToggle">
          <span data-i18n="ui_create_add_guests_label">G√§ste hinzuf√ºgen</span>
          <div class="option-tooltip" role="tooltip">
            <div class="option-tooltip-title" data-i18n="talk_option_add_guests_title">üåç G√§ste hinzuf√ºgen</div>
            <ul class="option-tooltip-list">
              <li data-i18n="talk_option_add_guests_line1">G√§ste werden ebenfalls direkt dem Raum hinzugef√ºgt</li>
              <li data-i18n="talk_option_add_guests_line2">‚ö†Ô∏è Sie erhalten eine separate (zus√§tzliche) E-Mail mit pers√∂nlichem Zugangslink</li>
            </ul>
          </div>
        </label>
        <label class="checkbox-row option-tooltip-wrap">
          <input type="checkbox" id="lobbyToggle">
          <span data-i18n="ui_create_lobby_label">Lobby bis Startzeit</span>
          <div class="option-tooltip" role="tooltip">
            <div class="option-tooltip-title" data-i18n="talk_option_lobby_title">üö™ Lobby bis Startzeit</div>
            <ul class="option-tooltip-list">
              <li data-i18n="talk_option_lobby_line1">Teilnehmer landen vor Beginn in der Lobby (Warteraum) und k√∂nnen noch nicht in den Call</li>
              <li data-i18n="talk_option_lobby_line2">‚ö†Ô∏è Erst ab der eingestellten Startzeit (oder wenn ein Moderator die Lobby beendet) ist der Beitritt m√∂glich</li>
              <li data-i18n="talk_option_lobby_line3">Ideal, damit niemand zu fr√ºh in Meeting/Webinar reinplatzt.</li>
            </ul>
          </div>
        </label>
        <label class="checkbox-row option-tooltip-wrap">
          <input type="checkbox" id="listableToggle" checked>
          <span data-i18n="ui_create_listable_label">In Suche anzeigen</span>
          <div class="option-tooltip" role="tooltip">
            <div class="option-tooltip-title" data-i18n="talk_option_listable_title">üîç In Suche anzeigen</div>
            <ul class="option-tooltip-list">
              <li data-i18n="talk_option_listable_line1">Der Raum ist √ºber die Talk-Suche auffindbar</li>
              <li data-i18n="talk_option_listable_line2">‚ö†Ô∏è Erleichtert das Wiederfinden, ist aber f√ºr jeden Benutzer auffindbar.</li>
            </ul>
          </div>
        </label>
      </div>
      <div class="section delegate-section">
        <label for="delegateInput" data-i18n="ui_create_moderator_label">Moderator (optional)</label>
        <div class="delegate-field">
          <div class="delegate-input-wrap">
            <div class="delegate-input-row">
              <input id="delegateInput" type="text" autocomplete="off" spellcheck="false">
              <button type="button" id="delegateClearBtn" data-i18n="ui_button_clear">Leeren</button>
            </div>
            <div class="delegate-dropdown" id="delegateDropdown"></div>
          </div>
          <div class="delegate-status" id="delegateStatus"></div>
          <div class="delegate-selected" id="delegateSelected" hidden>
            <div class="delegate-avatar">
              <img id="delegateAvatarImg" alt="">
              <span id="delegateAvatarInitials"></span>
            </div>
            <div class="delegate-selected-text">
              <div class="delegate-selected-title" data-i18n="ui_delegate_selected_title">Ausgew√§hlt</div>
              <div class="delegate-selected-name" id="delegateSelectedName"></div>
              <div class="delegate-selected-meta" id="delegateSelectedMeta"></div>
            </div>
          </div>
          <div class="delegate-hint" data-i18n="ui_create_moderator_hint">Moderator kann optional vorab gesetzt werden.</div>
        </div>
      </div>
    </div>
    <div class="footer">
      <button type="button" id="cancelBtn" data-i18n="talk_dialog_close">Abbrechen</button>
      <button type="button" id="okBtn" class="primary" data-i18n="talk_button_create_room">OK</button>
    </div>
  </div>
  <script src="../modules/i18n.js"></script>
  <script src="../modules/i18nOverride.js"></script>
  <script src="../modules/ocs.js"></script>
  <script src="../modules/nccore.js"></script>
  <script src="../modules/talkcore.js"></script>
  <script src="popupSizing.js"></script>
  <script src="password.js"></script>
  <script src="domI18n.js"></script>
  <script src="talkDialog.js"></script>
</body>



















